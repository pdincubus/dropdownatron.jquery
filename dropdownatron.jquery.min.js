!function(e){var t=function(e,t){this.init("dropdownatron",e,t)};t.prototype={constructor:t,init:function(t,n,r){this.type=t;this.$element=e(n);this.options=this.getOptions(r);if(this.$element[0].tagName!="SELECT"){throw"Cannot bind to anything other than SELECT elements"}this._build();var i=this;this.$element.on("change",function(t){i.select(e(this).val())})},getOptions:function(t){return e.extend({},e.fn[this.type].defaults,this.$element.data(),t)},_build:function(){var t=this;this.$element.trigger("dropdownatron.pre_build");if(this.options.keyboardAccess===true){this.$element.addClass("visuallyhidden focusable").wrap(e("<div/>").addClass("dropdownatron-container"))}else{this.$element.hide().wrap(e("<div/>").addClass("dropdownatron-container"))}this.$container=this.$element.parent();this.$options=e("<ul/>").addClass("dropdownatron-options").appendTo(this.$container);this.$element.find("option").each(function(){e("<li/>").text(e(this).text()).data("val",e(this).attr("value")).attr("data-val",e(this).attr("value")).appendTo(t.$options).on({click:function(e){t.onSelect(e)}})});e("<span/>").addClass("dropdownatron-select").appendTo(this.$container).on({click:function(e){t.onToggle(e)}});var n=this.$options.children().first(),r=this.$element.val();if(r){var i=this.$options.children().filter(function(){return e(this).data("val")==r});n=i.length>0?i:n}e("<div/>").addClass("dropdownatron-selected").text(n.text()).data("val",n.data("val")).attr("data-val",n.data("val")).appendTo(this.$container).on({click:function(e){t.onToggle(e)}});this.$options.hide();this.select(n.data("val"));this.$element.trigger("dropdownatron.built")},selected:function(){return this.$container.find(".dropdownatron-selected").data("val")},onToggle:function(e){e.preventDefault();e.stopPropagation();this.toggle()},toggle:function(){this._event("toggled");if(this.$options.is(":visible")){this.close()}else{this.open()}},open:function(){if(!this.$options.is(":visible")&&!this.$options.is(":animated")){this._event("pre_open");var t=this;if(this.options.animation=="animate"){var n=this.$options.show().outerHeight();this.$options.css("height",0).animate({height:n},this.options.speed,this.options.easing,function(){t._event("opened")})}else{this.$options.fadeIn(this.options.speed,function(){t._event("opened")})}this.$container.addClass("shown");e("body").on("click.dropdownatron",function(n){t.close();e("body").off("click.dropdownatron")})}},close:function(){if(this.$options.is(":visible")&&!this.$options.is(":animated")){this._event("pre_close");var t=this;if(this.options.animation=="animate"){var n=this.$options.outerHeight();this.$options.animate({height:0},this.options.speed,this.options.easing,function(){e(this).hide().css("height",n);t._event("closed")})}else{this.$options.fadeOut(this.options.speed,function(){t._event("closed")})}this.$container.removeClass("shown")}},onSelect:function(t){t.preventDefault();t.stopPropagation();this.select(e(t.target).data("val"))},select:function(t){this.close();if(this.selected()==t){return}var n=this.$options.children().filter(function(){return e(this).data("val")==t});if(n.length==0){return}n.addClass("on").siblings().removeClass("on");this.$container.find(".dropdownatron-selected").data("val",t).text(n.text());this.$element.val(t);this._event("change")},_event:function(e){this.$element.trigger("dropdownatron."+e)}};e.fn.dropdownatron=function(n){return this.each(function(){var r=e(this),i=r.data("dropdownatron"),s=typeof n=="object"&&n;if(!i){r.data("dropdownatron",i=new t(this,s))}if(typeof n=="string"){i[n]()}})};e.fn.dropdownatron.defaults={speed:250,easing:"swing",animation:"animate",keyboardAccess:true}}(window.jQuery);
