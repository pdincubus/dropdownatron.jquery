!function(t){var n=function(t,n){this.init("dropdownatron",t,n)};n.prototype={constructor:n,init:function(n,i,e){if(this.type=n,this.$element=t(i),this.options=this.getOptions(e),"SELECT"!=this.$element[0].tagName)throw"Cannot bind to anything other than SELECT elements";this._build();var o=this;this.$element.on("change",function(){o.select(t(this).val())})},getOptions:function(n){return t.extend({},t.fn[this.type].defaults,this.$element.data(),n)},_build:function(){var n=this;this.$element.trigger("dropdownatron.pre_build"),this.$element.hide().wrap(t("<div/>").addClass("dropdownatron-container")),this.$container=this.$element.parent(),this.$options=t("<ul/>").addClass("dropdownatron-options").appendTo(this.$container),this.$element.find("option").each(function(){t("<li/>").text(t(this).text()).data("val",t(this).attr("value")).attr("data-val",t(this).attr("value")).appendTo(n.$options).on({click:function(t){n.onSelect(t)}})}),t("<span/>").addClass("dropdownatron-select").appendTo(this.$container).on({click:function(t){n.onToggle(t)}});var i=this.$options.children().first(),e=this.$element.val();if(e){var o=this.$options.children().filter(function(){return t(this).data("val")==e});i=o.length>0?o:i}t("<div/>").addClass("dropdownatron-selected").text(i.text()).data("val",i.data("val")).attr("data-val",i.data("val")).appendTo(this.$container).on({click:function(t){n.onToggle(t)}}),this.$options.hide(),this.select(i.data("val")),this.$element.trigger("dropdownatron.built")},selected:function(){return this.$container.find(".dropdownatron-selected").data("val")},onToggle:function(t){t.preventDefault(),t.stopPropagation(),this.toggle()},toggle:function(){this._event("toggled"),this.$options.is(":visible")?this.close():this.open()},open:function(){if(!this.$options.is(":visible")&&!this.$options.is(":animated")){this._event("pre_open");var n=this;if("animate"==this.options.animation){var i=this.$options.show().outerHeight();this.$options.css("height",0).animate({height:i},this.options.speed,this.options.easing,function(){n._event("opened")})}else this.$options.fadeIn(this.options.speed,function(){n._event("opened")});this.$container.addClass("shown"),t("body").on("click.dropdownatron",function(){n.close(),t("body").off("click.dropdownatron")})}},close:function(){if(this.$options.is(":visible")&&!this.$options.is(":animated")){this._event("pre_close");var n=this;if("animate"==this.options.animation){var i=this.$options.outerHeight();this.$options.animate({height:0},this.options.speed,this.options.easing,function(){t(this).hide().css("height",i),n._event("closed")})}else this.$options.fadeOut(this.options.speed,function(){n._event("closed")});this.$container.removeClass("shown")}},onSelect:function(n){n.preventDefault(),n.stopPropagation(),this.select(t(n.target).data("val"))},select:function(n){if(this.close(),this.selected()!=n){var i=this.$options.children().filter(function(){return t(this).data("val")==n});0!=i.length&&(i.addClass("on").siblings().removeClass("on"),this.$container.find(".dropdownatron-selected").data("val",n).text(i.text()),this.$element.val(n),this._event("change"))}},_event:function(t){this.$element.trigger("dropdownatron."+t)}},t.fn.dropdownatron=function(i){return this.each(function(){var e=t(this),o=e.data("dropdownatron"),s="object"==typeof i&&i;o||e.data("dropdownatron",o=new n(this,s)),"string"==typeof i&&o[i]()})},t.fn.dropdownatron.defaults={speed:250,easing:"swing",animation:"animate"}}(window.jQuery);